{% extends "base.html" %}

{% block title %}Login – Central de Relacionamento NOVACAP{% endblock %}

{% block content %}
<section class="auth-container fade-in" style="display: flex; flex-direction: column; align-items: center; margin-top: 4rem;">

  <!-- Cabeçalho com logotipo GDF -->
  <div class="login-header text-center" style="margin-bottom: 2rem;">
    <img src="{{ url_for('static', filename='../images/ico-logo-gdf.svg') }}" alt="GDF" height="90" style="margin-bottom: 1rem;">
    <h1 style="color: #002d62; font-size: 2rem; margin-bottom: 0.3rem;">Central de Relacionamento</h1>
    <h2 style="color: #005fa3; font-size: 1.2rem; font-weight: 500;">Companhia Urbanizadora da Nova Capital do Brasil</h2>
  </div>

  <!-- Cartão de login -->
  <div class="auth-card" style="
        background-color: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        width: 100%;
        max-width: 400px;
        padding: 2.5rem 2rem;
        text-align: center;
    ">

    <h3 style="color: #002d62; margin-bottom: 1.5rem;">
      <i class="fas fa-lock"></i> Acesso ao Sistema
    </h3>

    <!-- Mensagens Flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}" style="margin-bottom: 1rem;">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Formulário de Login -->
    <form method="POST" action="{{ url_for('main_bp.login') }}" novalidate style="text-align: left;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

      <!-- Usuário -->
      <div class="form-group" style="margin-bottom: 1rem;">
        <label for="username" style="font-weight: 600;">Nome de Usuário</label>
        <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
          <i class="fas fa-user" style="color: #005fa3; margin-right: 0.5rem;"></i>
          <input type="text" id="username" name="username" placeholder="ex: nome.sobrenome"
                 required autocomplete="username" style="border: none; outline: none; width: 100%;">
        </div>
      </div>

      <!-- Senha -->
      <div class="form-group" style="margin-bottom: 1rem;">
        <label for="password" style="font-weight: 600;">Senha</label>
        <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
          <i class="fas fa-lock" style="color: #005fa3; margin-right: 0.5rem;"></i>
          <input type="password" id="password" name="password" placeholder="Digite sua senha"
                 required autocomplete="current-password" style="border: none; outline: none; width: 100%;">
        </div>
      </div>

      <!-- Seleção de Módulo -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="sistema" style="font-weight: 600;">Selecione o Módulo</label>
        <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
          <i class="fas fa-layer-group" style="color: #005fa3; margin-right: 0.5rem;"></i>
          <select id="sistema" name="sistema" required style="border: none; outline: none; width: 100%;">
            <option value="">-- Escolha o módulo --</option>
            <option value="tramite">Tramitação de Processos</option>
            <option value="protocolo">Protocolo de Atendimento</option>
          </select>
        </div>
      </div>

      <!-- Botão principal -->
      <div class="button-group" style="text-align: center; margin-top: 1.5rem;">
        <button type="submit" class="btn-primary" style="
          background-color: #005fa3;
          color: white;
          border: none;
          border-radius: 6px;
          padding: 0.8rem 2rem;
          font-size: 1rem;
          cursor: pointer;
          transition: 0.3s;">
          <i class="fas fa-sign-in-alt"></i> Entrar
        </button>
      </div>

      <!-- Links de suporte -->
      <div class="auth-links" style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem;">
        <a class="btn-link" href="{{ url_for('main_bp.cadastro') }}" style="color: #005fa3; text-decoration: none;">Solicitar Cadastro</a>
        <span class="sep" style="margin: 0 0.5rem; color: #ccc;">•</span>
        <a class="btn-link" href="{{ url_for('main_bp.trocar_senha') }}" style="color: #005fa3; text-decoration: none;">Redefinir Senha</a>
      </div>
    </form>
  </div>

  <!-- Rodapé institucional -->
  <div class="auth-footer text-center" style="margin-top: 2.5rem; color: #777; font-size: 0.85rem;">
    <p>© {{ current_year or 2025 }} Governo do Distrito Federal – Companhia Urbanizadora da Nova Capital do Brasil (NOVACAP)</p>
  </div>

</section>

<!-- Ícones Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
{% endblock %}
