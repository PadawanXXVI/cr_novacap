{% extends "base.html" %}
{% block title %}Redefinir Senha – Central de Relacionamento NOVACAP{% endblock %}

{% block content %}
<section class="auth-container fade-in" style="display: flex; flex-direction: column; align-items: center; margin-top: 4rem;">

  <!-- Cabeçalho institucional -->
  <div class="login-header text-center" style="margin-bottom: 2rem;">
    <img src="{{ url_for('static', filename='../images/ico-logo-gdf.svg') }}" alt="GDF" height="90" style="margin-bottom: 1rem;">
    <h1 style="color: #002d62; font-size: 2rem; margin-bottom: 0.3rem;">Central de Relacionamento</h1>
    <h2 style="color: #005fa3; font-size: 1.2rem; font-weight: 500;">Redefinição de Senha</h2>
  </div>

  <!-- Cartão de redefinição -->
  <div class="auth-card" style="
        background-color: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        width: 100%;
        max-width: 520px;
        padding: 2.5rem 2rem;
        text-align: center;
    ">

    <!-- Mensagens -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}" style="margin-bottom: 1rem;">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Formulário -->
    <form method="POST" action="{{ url_for('main_bp.trocar_senha') }}" novalidate style="text-align: left;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

      <!-- Nome completo -->
      <div class="form-group" style="margin-bottom: 1rem;">
        <label for="nome_completo" style="font-weight: 600;">Nome Completo</label>
        <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
          <i class="fas fa-user" style="color: #005fa3; margin-right: 0.5rem;"></i>
          <input type="text" id="nome_completo" name="nome_completo" placeholder="Informe seu nome completo" required
                 style="border: none; outline: none; width: 100%;">
        </div>
      </div>

      <!-- E-mail institucional -->
      <div class="form-group" style="margin-bottom: 1rem;">
        <label for="email" style="font-weight: 600;">E-mail Institucional</label>
        <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
          <i class="fas fa-envelope" style="color: #005fa3; margin-right: 0.5rem;"></i>
          <input type="email" id="email" name="email" placeholder="ex: nome.sobrenome@novacap.df.gov.br" required
                 style="border: none; outline: none; width: 100%;">
        </div>
      </div>

      <!-- Nova senha e confirmação -->
      <div class="form-row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="form-col" style="flex: 1;">
          <label for="nova_senha" style="font-weight: 600;">Nova Senha</label>
          <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
            <i class="fas fa-lock" style="color: #005fa3; margin-right: 0.5rem;"></i>
            <input type="password" id="nova_senha" name="nova_senha" placeholder="Digite a nova senha" required
                   style="border: none; outline: none; width: 100%;">
          </div>
        </div>

        <div class="form-col" style="flex: 1;">
          <label for="confirmar_senha" style="font-weight: 600;">Confirmar Nova Senha</label>
          <div class="input-with-icon" style="display: flex; align-items: center; border: 1px solid #ccc; border-radius: 6px; padding: 0.5rem;">
            <i class="fas fa-check-circle" style="color: #005fa3; margin-right: 0.5rem;"></i>
            <input type="password" id="confirmar_senha" name="confirmar_senha" placeholder="Confirme a nova senha" required
                   style="border: none; outline: none; width: 100%;">
          </div>
        </div>
      </div>

      <!-- Botões -->
      <div class="button-group" style="margin-top: 2rem; text-align: center;">
        <button type="submit" class="btn-primary" style="
          background-color: #005fa3;
          color: white;
          border: none;
          border-radius: 6px;
          padding: 0.8rem 1.8rem;
          font-size: 1rem;
          cursor: pointer;
          transition: 0.3s;">
          <i class="fas fa-key"></i> Atualizar Senha
        </button>

        <a href="{{ url_for('main_bp.login') }}" style="margin-left: 1rem;">
          <button type="button" class="btn-outline-gray" style="
            background-color: transparent;
            border: 1px solid #ccc;
            color: #333;
            border-radius: 6px;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;">
            <i class="fas fa-arrow-left"></i> Voltar
          </button>
        </a>
      </div>
    </form>

    <!-- Rodapé informativo -->
    <p style="margin-top: 2rem; font-size: 0.9rem; color: #777; text-align:center;">
      ⚠ Para redefinir sua senha, os dados informados devem coincidir exatamente com os cadastrados.<br>
      Em caso de dúvidas, entre em contato com o administrador do sistema.
    </p>
  </div>

  <!-- Rodapé institucional -->
  <div class="auth-footer text-center" style="margin-top: 2.5rem; color: #777; font-size: 0.85rem;">
    <p>© {{ current_year or 2025 }} Governo do Distrito Federal – Companhia Urbanizadora da Nova Capital do Brasil (NOVACAP)</p>
  </div>

</section>

<!-- Ícones (Font Awesome) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
{% endblock %}